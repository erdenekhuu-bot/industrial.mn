import{S as Z}from"./ShowMore-7b5922a3.js";import{_ as A,M as L,f as m,o as s,g as l,h as n,w as i,v as p,p as k,i as t,t as o,l as v,j as S,F as y,k as g,A as H,I as R,J as T}from"./app-b30e4361.js";const j={head:{title:"Product Listing Page"},data:()=>({metaTitle:"",metaDescription:"",loading:!0,filterDrawerOpen:!1,totalProducts:0,totalPages:1,isBrandRoute:!1,queryParam:{page:1,categorySlug:null,brandIds:[],attributeValues:[],keyword:null,sortBy:"popular",minPrice:null,maxPrice:null},attributes:[],allBrands:[],rootCategories:[],parentCategory:{},currentCategory:{},childCategories:[],products:[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],sortingDefault:{}}),components:{ShowMore:Z},computed:{sortingOptions(){return[{name:this.$i18n.t("most_popular"),value:"popular"},{name:this.$i18n.t("latest_first"),value:"latest"},{name:this.$i18n.t("oldest_first"),value:"oldest"},{name:this.$i18n.t("higher_price_first"),value:"highest_price"},{name:this.$i18n.t("lower_price_first"),value:"lowest_price"}]}},watch:{metaTitle(e){this.updateHead(e,this.metaDescription)},metaDescription(e){this.updateHead(this.metaTitle,e)}},methods:{updateHead(e,a){L({title:e,meta:[{name:"description",content:a}]})},pageSwitch(e){this.$router.push({query:{...this.$route.query,page:this.queryParam.page}}).catch(()=>{}),this.getList({page:e})},sortUpdate(e){if(this.queryParam.sortBy=e,this.$router.push({query:{...this.$route.query,sortBy:this.queryParam.sortBy}}).catch(()=>{}),this.getList({sortBy:e}),this.queryParam.sortBy!=="popular"){let a=this.sortingOptions.find(d=>d.value===this.queryParam.sortBy);this.sortingDefault=a}},brandChange(e){if(this.queryParam.brandIds.indexOf(e)>-1){let a=this.queryParam.brandIds.indexOf(e);this.queryParam.brandIds.splice(a,1)}else this.queryParam.brandIds.push(e);this.$router.push({query:{...this.$route.query,brandIds:this.queryParam.brandIds}}).catch(()=>{}),this.getList({})},attributeValueChange(e){if(this.queryParam.attributeValues.indexOf(e)>-1){let a=this.queryParam.attributeValues.indexOf(e);this.queryParam.attributeValues.splice(a,1)}else this.queryParam.attributeValues.push(e);this.$router.push({query:{...this.$route.query,attributeValues:this.queryParam.attributeValues}}).catch(()=>{}),this.getList({})},filterByPriceRange(){let e={};e.minPrice=this.queryParam.minPrice,e.maxPrice=this.queryParam.maxPrice,this.$router.push({query:{...this.$route.query,...e}}).catch(()=>{}),this.getList({})},toggleFilterDrawer(e){this.filterDrawerOpen=e},async getList(e){this.loading=!0;let a={...this.queryParam,...e},d="product/search?";d+=`&page=${this.queryParam.page}`,d+=a.categorySlug?`&category_slug=${a.categorySlug}`:"",d+=a.brandIds?`&brand_ids=${a.brandIds}`:"",d+=a.attributeValues?`&attribute_values=${a.attributeValues}`:"",d+=a.keyword?`&keyword=${a.keyword}`:"",d+=a.sortBy?`&sort_by=${a.sortBy}`:"",d+=a.minPrice?`&min_price=${a.minPrice}`:"",d+=a.maxPrice?`&max_price=${a.maxPrice}`:"";const u=await this.call_api("get",d);u.data.success&&(this.loading=!1,this.metaTitle=u.data.metaTitle,this.products=u.data.products.data,this.attributes=u.data.attributes.data,this.allBrands=u.data.allBrands.data,this.rootCategories=u.data.rootCategories.data,this.parentCategory=u.data.parentCategory?u.data.parentCategory:{},this.currentCategory=u.data.currentCategory?u.data.currentCategory:{},this.childCategories=u.data.childCategories?u.data.childCategories.data:[],this.totalPages=u.data.totalPage,this.totalProducts=u.data.total,this.queryParam.page=u.data.currentPage)}},created(){this.isBrandRoute=this.$route.params.brandId?!0:this.isBrandRoute,this.queryParam.categorySlug=this.$route.params.categorySlug||this.queryParam.categorySlug,this.queryParam.keyword=this.$route.params.keyword,this.queryParam.brandIds=this.$route.params.brandId||this.queryParam.brandIds,this.queryParam.page=this.$route.query.page||this.queryParam.page,this.queryParam.sortBy=this.$route.query.sortBy||this.queryParam.sortBy,this.queryParam.minPrice=this.$route.query.minPrice||this.queryParam.minPrice,this.queryParam.maxPrice=this.$route.query.maxPrice||this.queryParam.maxPrice,this.queryParam.attributeValues=this.$route.query.attributeValues||this.queryParam.attributeValues,this.sortingDefault={name:this.$i18n.t("most_popular"),value:"popular"},this.getList({page:this.queryParam.page,categorySlug:this.queryParam.categorySlug,brandIds:this.queryParam.brandIds,attributeValues:this.queryParam.attributeValues,keyword:this.queryParam.keyword,sortBy:this.queryParam.sortBy,minPrice:this.queryParam.minPrice,maxPrice:this.queryParam.maxPrice})}},f=e=>(R("data-v-dcc88cb1"),e=e(),T(),e),F=f(()=>t("b",{class:"px-2"},"Нүүр",-1)),N={class:"px-2"},z={key:0,class:"px-2"},E={key:1,class:"px-2"},J={class:"border-bottom pa-5 d-lg-none d-flex align-center"},Y=f(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[t("path",{id:"Path_2643","data-name":"Path 2643",d:"M20,5H18.829a3,3,0,0,0-5.659,0H4A1,1,0,0,0,4,7h9.171a3,3,0,0,0,5.659,0H20a1,1,0,0,0,0-2ZM16,7a1,1,0,1,0-1-1A1,1,0,0,0,16,7ZM3,12a1,1,0,0,1,1-1H5.171a3,3,0,0,1,5.659,0H20a1,1,0,0,1,0,2H10.829a3,3,0,0,1-5.659,0H4A1,1,0,0,1,3,12Zm5,1a1,1,0,1,0-1-1A1,1,0,0,0,8,13ZM4,17a1,1,0,0,0,0,2h9.171a3,3,0,0,0,5.659,0H20a1,1,0,0,0,0-2H18.829a3,3,0,0,0-5.659,0Zm13,1a1,1,0,1,1-1-1A1,1,0,0,1,17,18Z",transform:"translate(-3 -3)",fill:"#2a2e34","fill-rule":"evenodd"})],-1)),x={class:"ms-4 fw-600 fs-14 lh-1"},G=f(()=>t("i",{class:"la la-close fs-20"},null,-1)),K=[G],Q={class:"pa-5"},W={class:"mb-5"},X={class:"fw-700 fs-14 mb-4 border-bottom pb-3"},ee={class:"list-unstyled ps-0"},te={class:"my-2"},ae=f(()=>t("i",{class:"las la-angle-left fs-12 me-1"},null,-1)),se={key:0,class:"my-2"},re=f(()=>t("i",{class:"las la-angle-left fs-12 me-1"},null,-1)),le={key:0,class:"las la-angle-down fs-12 me-1"},oe={class:"mb-4 pt-4 border-top"},ie={class:"fw-700 fs-14 mb-3"},ne={class:"d-flex align-center"},ue={class:"col"},de=f(()=>t("span",{class:"mx-1 col col-auto opacity-60"},"to",-1)),ce={class:"col"},me={class:"col col-auto"},he={key:0,class:"mb-4 pt-4 border-top"},pe={class:"fw-700 fs-14 mb-3"},ye={key:0},ge={class:"fw-700 fs-14 mb-3"},_e={key:0},fe={class:"pt-5 ps-lg-7"},Pe={class:"d-flex align-center"},be={key:0,class:"fs-18"},ve={key:1,class:"fs-18"},qe={key:2,class:"fs-18"},we={class:"opacity-60 mb-0 fs-12"},ke={class:"d-lg-none ms-auto ms-sm-0"},$e=f(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[t("path",{id:"Path_2643","data-name":"Path 2643",d:"M20,5H18.829a3,3,0,0,0-5.659,0H4A1,1,0,0,0,4,7h9.171a3,3,0,0,0,5.659,0H20a1,1,0,0,0,0-2ZM16,7a1,1,0,1,0-1-1A1,1,0,0,0,16,7ZM3,12a1,1,0,0,1,1-1H5.171a3,3,0,0,1,5.659,0H20a1,1,0,0,1,0,2H10.829a3,3,0,0,1-5.659,0H4A1,1,0,0,1,3,12Zm5,1a1,1,0,1,0-1-1A1,1,0,0,0,8,13ZM4,17a1,1,0,0,0,0,2h9.171a3,3,0,0,0,5.659,0H20a1,1,0,0,0,0-2H18.829a3,3,0,0,0-5.659,0Zm13,1a1,1,0,1,1-1-1A1,1,0,0,1,17,18Z",transform:"translate(-3 -3)",fill:"#2a2e34","fill-rule":"evenodd"})],-1)),Ce=[$e],Ve={class:"fs-13 d-flex align-center opacity-80"},Be={class:"opacity-60 mx-1"},Se={class:"mb-7"},He={key:1,class:"pa-4 text-center fs-20"},Ie={key:0,class:"text-center"};function De(e,a,d,u,Ue,h){const q=m("v-row"),C=m("v-container"),P=m("router-link"),V=m("v-text-field"),I=m("v-btn"),w=m("v-checkbox"),B=m("ShowMore"),b=m("v-col"),D=m("v-select"),U=m("product-box"),M=m("v-pagination");return s(),l("div",null,[n(C,{class:"pt-20"},{default:i(()=>[e.products.length?(s(),p(q,{key:0},{default:i(()=>[F,k(" / "),t("b",N,o(e.$t("all_categories")),1),k(" / "),t("div",null,[e.queryParam.keyword?(s(),l("b",z,o(e.$t("search_results_for"))+' "'+o(e.queryParam.keyword)+'" ',1)):(s(),l("b",E,o(e.currentCategory.name),1))])]),_:1})):v("",!0)]),_:1}),n(C,{class:"pt-0"},{default:i(()=>[n(q,{"no-gutters":"",align:"start"},{default:i(()=>[n(b,{cols:"auto",class:"w-lg-270px sticky-top"},{default:i(()=>[t("div",{class:H(["border-end filter-drawer ",{"open c-scrollbar overflow-y-auto":e.filterDrawerOpen}])},[t("div",J,[Y,t("span",x,o(e.$t("filters")),1),t("button",{type:"button",onClick:a[0]||(a[0]=S(r=>h.toggleFilterDrawer(!e.filterDrawerOpen),["stop"])),class:"ms-4 fw-600 fs-20 lh-1 ms-auto"},K)]),t("div",Q,[t("div",W,[t("h4",X,o(e.$t("categories")),1),t("div",null,[t("ul",ee,[e.is_empty_obj(e.currentCategory)?(s(!0),l(y,{key:0},g(e.rootCategories,(r,c)=>(s(),l("li",{key:c,class:"my-2"},[n(P,{to:{name:"Category",params:{categorySlug:r.slug}},class:"text-reset fs-14"},{default:i(()=>[k(o(r.name),1)]),_:2},1032,["to"])]))),128)):(s(),l(y,{key:1},[t("li",te,[n(P,{to:{name:"Shop"},class:"text-reset fs-14"},{default:i(()=>[ae,t("span",null,o(e.$t("all_categories")),1)]),_:1})]),e.is_empty_obj(e.parentCategory)?v("",!0):(s(),l("li",se,[n(P,{to:{name:"Category",params:{categorySlug:e.parentCategory.slug}},class:"text-reset fs-14"},{default:i(()=>[re,t("span",null,o(e.parentCategory.name),1)]),_:1},8,["to"])])),t("li",{class:H(["my-2",{"ms-5":e.childCategories.length==0}])},[n(P,{to:{name:"Category",params:{categorySlug:e.currentCategory.slug}},class:"text-reset fs-14 fw-600"},{default:i(()=>[e.childCategories.length>0?(s(),l("i",le)):v("",!0),t("span",null,o(e.currentCategory.name),1)]),_:1},8,["to"])],2),(s(!0),l(y,null,g(e.childCategories,(r,c)=>(s(),l("li",{class:"my-2 ms-5",key:c},[n(P,{to:{name:"Category",params:{categorySlug:r.slug}},class:"text-reset fs-14"},{default:i(()=>[t("span",null,o(r.name),1)]),_:2},1032,["to"])]))),128))],64))])])]),t("div",oe,[t("h4",ie,o(e.$t("price")),1),t("div",ne,[t("div",ue,[n(V,{variant:"plain",type:"number",class:"form-control form-control-sm min-max-field",modelValue:e.queryParam.minPrice,"onUpdate:modelValue":a[1]||(a[1]=r=>e.queryParam.minPrice=r),placeholder:e.$t("min_price"),"hide-details":""},null,8,["modelValue","placeholder"])]),de,t("div",ce,[n(V,{variant:"plain",type:"number",class:"form-control form-control-sm min-max-field",modelValue:e.queryParam.maxPrice,"onUpdate:modelValue":a[2]||(a[2]=r=>e.queryParam.maxPrice=r),placeholder:e.$t("max_price"),"hide-details":""},null,8,["modelValue","placeholder"])]),t("div",me,[n(I,{size:"small",fab:"",type:"submit",color:"primary",class:"rounded ms-2",elevation:"0",onClick:h.filterByPriceRange},{default:i(()=>[k(o(e.$t("go")),1)]),_:1},8,["onClick"])])])]),e.isBrandRoute?v("",!0):(s(),l("div",he,[t("h4",pe,o(e.$t("brands")),1),e.allBrands.length<5?(s(),l("div",ye,[(s(!0),l(y,null,g(e.allBrands,(r,c)=>(s(),p(w,{"true-icon":"las la-check",class:"mt-1","hide-details":"",key:c,label:r.name,"onUpdate:modelValue":_=>h.brandChange(r.id)},null,8,["label","onUpdate:modelValue"]))),128))])):(s(),p(B,{key:1},{default:i(()=>[(s(!0),l(y,null,g(e.allBrands,(r,c)=>(s(),p(w,{"true-icon":"las la-check",class:"mt-1","hide-details":"",key:c,label:r.name,"onUpdate:modelValue":_=>h.brandChange(r.id)},null,8,["label","onUpdate:modelValue"]))),128))]),_:1}))])),(s(!0),l(y,null,g(e.attributes,(r,c)=>(s(),l("div",{class:"mb-4 pt-4 border-top",key:c},[t("h4",ge,o(r.name),1),r.values.data.length<5?(s(),l("div",_e,[(s(!0),l(y,null,g(r.values.data,(_,$)=>(s(),p(w,{"true-icon":"las la-check",class:"mt-1","hide-details":"",key:$,label:_.name,"onUpdate:modelValue":O=>h.attributeValueChange(_.id)},null,8,["label","onUpdate:modelValue"]))),128))])):(s(),p(B,{key:1},{default:i(()=>[(s(!0),l(y,null,g(r.values.data,(_,$)=>(s(),p(w,{"true-icon":"las la-check",class:"mt-1","hide-details":"",key:$,label:_.name,"onUpdate:modelValue":O=>h.attributeValueChange(_.id)},null,8,["label","onUpdate:modelValue"]))),128))]),_:2},1024))]))),128))])],2)]),_:1}),n(b,null,{default:i(()=>[t("div",fe,[n(q,{align:"end",class:"mb-3"},{default:i(()=>[n(b,{cols:"12",sm:""},{default:i(()=>[t("div",Pe,[t("div",null,[e.queryParam.keyword?(s(),l("h1",be,o(e.$t("search_results_for"))+' "'+o(e.queryParam.keyword)+'" ',1)):e.is_empty_obj(e.currentCategory)?(s(),l("h1",qe,o(e.$t("all_products")),1)):(s(),l("h1",ve,o(e.currentCategory.name),1)),t("p",we,o(e.$t("total")+" "+e.totalProducts+" "+e.$t("products_found")),1)]),t("div",ke,[t("button",{class:"ms-4 pa-2 border-gray-300 rounded border d-flex justify-center align-center",onClick:a[3]||(a[3]=S(r=>h.toggleFilterDrawer(!e.filterDrawerOpen),["stop"])),type:"button"},Ce)])])]),_:1}),n(b,{cols:"12",sm:"auto"},{default:i(()=>[n(D,{modelValue:e.sortingDefault,"onUpdate:modelValue":[a[4]||(a[4]=r=>e.sortingDefault=r),h.sortUpdate],items:h.sortingOptions,"item-title":"name","item-value":"value","menu-props":{offsetY:!0},"append-inner-icon":"las la-angle-down fs-14",density:"compact",flat:"",solo:"",variant:"outlined","hide-details":""},{selection:i(({item:r})=>[t("span",Ve,[t("span",Be,o(e.$t("sort_by"))+":",1),t("span",null,o(r.title),1)])]),_:1},8,["modelValue","items","onUpdate:modelValue"])]),_:1})]),_:1}),t("div",Se,[e.products.length>0?(s(),p(q,{key:0,class:"row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-xl-5 md-gutters-10"},{default:i(()=>[(s(!0),l(y,null,g(e.products,(r,c)=>(s(),p(b,{key:c},{default:i(()=>[n(U,{"product-details":r,"is-loading":e.loading},null,8,["product-details","is-loading"])]),_:2},1024))),128))]),_:1})):(s(),l("div",He,o(e.$t("no_product_found")),1))]),e.totalPages>1?(s(),l("div",Ie,[n(M,{modelValue:e.queryParam.page,"onUpdate:modelValue":[a[5]||(a[5]=r=>e.queryParam.page=r),h.pageSwitch],class:"my-4",length:e.totalPages,"prev-icon":"las la-angle-left","next-icon":"las la-angle-right","total-visible":7,elevation:"0"},null,8,["modelValue","length","onUpdate:modelValue"])])):v("",!0)])]),_:1})]),_:1})]),_:1})])}const Ze=A(j,[["render",De],["__scopeId","data-v-dcc88cb1"]]);export{Ze as default};
